(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[422],{9962:function(e,a,s){Promise.resolve().then(s.bind(s,3354))},1295:function(e,a,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),function(e,a){for(var s in a)Object.defineProperty(e,s,{enumerable:!0,get:a[s]})}(a,{default:function(){return r},unstable_getImgProps:function(){return c}});let l=s(1024),n=s(2301),t=s(7873),i=s(3222),o=l._(s(6515)),c=e=>{(0,t.warnOnce)("Warning: unstable_getImgProps() is experimental and may change or be removed at any time. Use at your own risk.");let{props:a}=(0,n.getImgProps)(e,{defaultLoader:o.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,s]of Object.entries(a))void 0===s&&delete a[e];return{props:a}},r=i.Image},3354:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return g}});var l=s(7437),n=s(1396),t=s.n(n),i=s(2759),o=s(504),c=s(2265),r=s(2749),d=s(9222),u=s(6691),m=s.n(u),p=s(1865),h=s(4033);function g(){var e;let[a,s]=(0,c.useState)(null),[n,u]=(0,c.useState)(!1),[g,x]=(0,c.useState)(!1),[j,f]=(0,c.useState)(!1),[v,N]=(0,c.useState)(null),[_,y]=(0,c.useState)(""),[b,k]=(0,c.useState)(!1),{register:C,setValue:w,handleSubmit:S,formState:{errors:G}}=(0,p.cI)({mode:"onChange"}),{data:O,status:P}=(0,r.useSession)(),F=(0,h.useSearchParams)(),U=null==F?void 0:F.get("nameUpdateModal"),z=null==F?void 0:F.get("deleteModal"),I=(0,h.useRouter)();async function M(e){try{let a=await d.Z.post("".concat("http://localhost:3000","/api/user/").concat(v,"/updateUserName"),{name:e});200===a.status&&(x(!0),k(!1))}catch(e){console.log(e)}}async function V(){try{let e=await d.Z.post("".concat("http://localhost:3000","/api/user/deleteUser"),{id:v});200===e.status&&f(!0)}catch(e){console.log(e)}}return((0,c.useEffect)(()=>{if(k(!0),"authenticated"===P&&O&&O.user){let e=async()=>{try{var e,a,s,l;let n=await d.Z.post("".concat("http://localhost:3000","/api/signin/userCheck"),{email:null==O?void 0:O.user.email,auth:null==O?void 0:O.user.provider}),t=n.data;if(null===t)try{let n=await d.Z.post("".concat("http://localhost:3000","/api/signup/signupwithAuth"),{name:null==O?void 0:null===(e=O.user)||void 0===e?void 0:e.name,email:null==O?void 0:null===(a=O.user)||void 0===a?void 0:a.email,auth:null==O?void 0:null===(s=O.user)||void 0===s?void 0:s.provider,password:""});t=null==n?void 0:null===(l=n.data)||void 0===l?void 0:l.id,N(t)}catch(e){console.error(e)}else N(t)}catch(e){console.log(e)}};e()}if(v){let e=async()=>{let e=await d.Z.get("".concat("http://localhost:3000","/api/user/").concat(v,"/getUserData"),{headers:{authorization:"".concat(O)}}),a=await e.data;s(a)};e()}},[P,O,v,b]),a)?(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:"p-mypage-profile__outer",children:[(0,l.jsxs)("div",{className:"p-mypage-profile",children:[(0,l.jsxs)("div",{className:"p-mypage-profile-image__outer",children:[(0,l.jsx)(o.G,{icon:i.V3X,className:"p-mypage-profile-image"}),(null==a?void 0:a.id)===1?(0,l.jsx)(o.G,{className:"p-mypage-profile-user-certified",icon:i.fV7}):(null==a?void 0:a.auth)==="kakao"?(0,l.jsx)("span",{className:"p-mypage-profile-user-auth__outer",children:(0,l.jsx)("span",{className:"p-mypage-profile-user-auth",style:{backgroundColor:"#fee500"},children:(0,l.jsx)(m(),{src:"/kakao_logo.svg",alt:"kakao 간편로그인 회원",width:"25",height:"30"})})}):(null==a?void 0:a.auth)==="naver"?(0,l.jsx)("span",{className:"p-mypage-profile-user-auth__outer",children:(0,l.jsx)("span",{className:"p-mypage-profile-user-auth",style:{backgroundColor:"#03c75a"},children:(0,l.jsx)(m(),{src:"/naver_logo.svg",alt:"naver 간편로그인 회원",width:"45",height:"45"})})}):(null==a?void 0:a.auth)==="google"?(0,l.jsx)("span",{className:"p-mypage-profile-user-auth__outer",children:(0,l.jsx)("span",{className:"p-mypage-profile-user-auth",style:{backgroundColor:"var(--white)"},children:(0,l.jsx)(m(),{src:"/google_logo.svg",alt:"google 간편로그인 회원",width:"70",height:"70"})})}):(0,l.jsx)("span",{className:"p-mypage-profile-user-auth__outer",children:(0,l.jsx)("span",{className:"p-mypage-profile-user-auth",style:{backgroundColor:"#62d9fc",color:"var(--white)",fontFamily:"Gowun Batang",fontSize:"30px",borderRadius:"0",padding:"5px"},children:"하"})})]}),(0,l.jsxs)("div",{className:"p-mypage-profile-user-name__outer",children:[n?(0,l.jsxs)("div",{className:"p-mypage-profile-user-name-input__outer",children:[(0,l.jsxs)("div",{className:"p-signup-form-nickname-input__outer",style:{margin:"0"},children:[(0,l.jsxs)("label",{children:[(0,l.jsx)("input",{...C("nickname",{required:"필수 입력 항목입니다.",minLength:{value:2,message:"2자 이상으로 입력해주세요."},maxLength:{value:8,message:"8자 이하로 입력해주세요."},validate:{check:e=>""===e.trim()?"공백을 제외한 문자를 입력해주세요.":e!==e.split(" ").join()?"공백이 포함되어 있습니다.":void 0}}),className:G.nickname||""!==_?"p-signup-form-nickname-input errored":"p-signup-form-nickname-input",name:"nickname",maxLength:8,placeholder:"별명 (2~8자)",autoComplete:"off",onBlur:async e=>{let a=await fetch("".concat("http://localhost:3000","/api/signup/nicknameCheck"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({nickname:e.target.value})}),s=await a.json();s?y("사용 중인 닉네임입니다."):y("")}}),(0,l.jsx)("span",{className:"form-control-blind",children:"닉네임 입력하기"})]}),(0,l.jsx)("div",{className:"p-signup-form-error-message",style:{paddingTop:"4px"},children:G.nickname?null===(e=G.nickname)||void 0===e?void 0:e.message:_})]}),(0,l.jsx)("button",{className:"nickname-update-button",onClick:()=>{G.nickname||"사용 중인 닉네임입니다."===_||I.push("/mypage/?nameUpdateModal=true")},children:"수정"}),(0,l.jsx)("button",{className:"nickname-update-button cancel",onClick:()=>{u(!1)},children:"취소"}),U&&(0,l.jsx)("div",{className:"modal__outer",children:(0,l.jsx)("div",{className:"modal",style:{height:"240px"},children:g?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("button",{onClick:()=>{I.push("/mypage"),u(!1),x(!1)},className:"modal-escape",children:(0,l.jsx)(o.G,{icon:i.g82})}),(0,l.jsx)("div",{className:"modal-title__outer",children:(0,l.jsx)("h1",{className:"modal-title",children:"정상적으로 변경되었습니다."})}),(0,l.jsx)("div",{className:"modal-button__outer",children:(0,l.jsx)("button",{onClick:()=>{I.push("/mypage"),u(!1),x(!1)},className:"modal-button confirm",children:"확인"})})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("button",{className:"modal-escape",onClick:I.back,children:(0,l.jsx)(o.G,{icon:i.g82})}),(0,l.jsxs)("div",{className:"modal-title__outer",children:[(0,l.jsx)(o.G,{icon:i.WV2,className:"modal-icon-exclamation"}),(0,l.jsx)("h1",{className:"modal-title",children:"닉네임을 변경하시겠습니까?"})]}),(0,l.jsxs)("div",{className:"modal-button__outer",children:[(0,l.jsx)("button",{className:"modal-button cancel",onClick:I.back,children:"취소"}),(0,l.jsx)("button",{className:"modal-button confirm",onClick:S(e=>{M(e.nickname)}),children:"확인"})]})]})})})]}):(0,l.jsxs)("div",{className:"p-mypage-profile-user-name",children:[null==a?void 0:a.name," ",(0,l.jsx)("button",{className:"p-mypage-profile-user-name-update-button",onClick:()=>{u(!0),w("nickname",null==a?void 0:a.name)},children:(0,l.jsx)(o.G,{icon:i.Yai})})]}),(0,l.jsx)("div",{className:"p-mypage-profile-user-email",children:null==a?void 0:a.email})]})]}),(0,l.jsx)(t(),{href:"/mypage/?deleteModal=true",className:"withdraw-button",children:"회원탈퇴"}),z&&(0,l.jsx)("div",{className:"modal__outer",children:(0,l.jsx)("div",{className:"modal",style:{height:"240px"},children:j?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("button",{onClick:()=>{(0,r.signOut)()},className:"modal-escape",children:(0,l.jsx)(o.G,{icon:i.g82})}),(0,l.jsx)("div",{className:"modal-title__outer",children:(0,l.jsx)("h1",{className:"modal-title",children:"정상적으로 회원탈퇴했습니다."})}),(0,l.jsx)("div",{className:"modal-button__outer",children:(0,l.jsx)("button",{onClick:()=>{(0,r.signOut)()},className:"modal-button confirm",children:"확인"})})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("button",{className:"modal-escape",onClick:I.back,children:(0,l.jsx)(o.G,{icon:i.g82})}),(0,l.jsxs)("div",{className:"modal-title__outer",children:[(0,l.jsx)(o.G,{icon:i.WV2,className:"modal-icon-exclamation"}),(0,l.jsx)("h1",{className:"modal-title",children:"정말 탈퇴하시겠습니까?"}),(0,l.jsx)("span",{className:"modal-content",children:"일기와 좋아요 기록이 모두 삭제됩니다."})]}),(0,l.jsxs)("div",{className:"modal-button__outer",children:[(0,l.jsx)("button",{className:"modal-button cancel",onClick:I.back,children:"취소"}),(0,l.jsx)("button",{className:"modal-button confirm",onClick:()=>{f(!1),V()},children:"확인"})]})]})})})]})}):(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("div",{className:"p-diary-list-unuser__outer",children:(0,l.jsxs)("div",{className:"p-diary-list-unuser",children:[(0,l.jsx)("p",{children:"로그인이 필요한 페이지입니다. 로그인 또는 회원가입을 해주세요."}),(0,l.jsx)(t(),{href:"/sign_in",className:"login-button confirm",children:"로그인 하러가기"})]})})})}},6691:function(e,a,s){e.exports=s(1295)},1396:function(e,a,s){e.exports=s(6685)}},function(e){e.O(0,[676,685,35,222,232,144,865,971,596,744],function(){return e(e.s=9962)}),_N_E=e.O()}]);