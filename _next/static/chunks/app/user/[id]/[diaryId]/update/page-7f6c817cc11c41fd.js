(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[376],{6898:function(e,t,a){Promise.resolve().then(a.bind(a,9554))},2588:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return i}});var s=a(7437),c=a(4033),r=a(2759),n=a(504);function i(){let e=(0,c.useRouter)();return(0,s.jsxs)("div",{className:"p-back-button",onClick:()=>e.back(),children:[(0,s.jsx)(n.G,{icon:r.A35,width:"16",height:"16"})," 이전 페이지"]})}},5098:function(e,t,a){"use strict";a.d(t,{Z:function(){return i}});var s=a(7437),c=a(2759),r=a(504),n=a(4033);function i(){let e=(0,n.useRouter)();return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"modal__outer",children:(0,s.jsxs)("div",{className:"modal",children:[(0,s.jsx)("button",{className:"modal-escape",onClick:e.back,children:(0,s.jsx)(r.G,{icon:c.g82})}),(0,s.jsx)("h1",{className:"modal-title",children:"정상적으로 일기가 작성되었습니다."}),(0,s.jsx)("div",{className:"modal-button__outer",children:(0,s.jsx)("button",{className:"modal-button confirm",onClick:e.back,children:"확인"})})]})})})}},9554:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return x}});var s=a(7437),c=a(2749),r=a(2265),n=a(4033),i=a(9222),l=a(1865),o=a(2759),d=a(504),u=a(2588),m=a(1396),h=a.n(m),p=a(5098);function x(){var e,t,a;let m=(0,n.useParams)(),x=(0,n.useRouter)(),{data:f}=(0,c.useSession)(),{register:j,handleSubmit:b,setValue:y,getValues:v,setError:N,watch:k,formState:{errors:g}}=(0,l.cI)({defaultValues:{createdAt:new Date,title:"",content:"",isPublic:!1,user:{}}}),_=k("isPublic");(0,r.useEffect)(()=>{(null==f?void 0:f.user)&&y("user",null==f?void 0:f.user);let e=async()=>{var e;let t=await i.Z.get("".concat("http://localhost:3000","/api/user/").concat(m.id,"/").concat(m.diaryId),{headers:{authorization:null==f?void 0:null===(e=f.user)||void 0===e?void 0:e.accessToken}}),a=await t.data;return a};e().then(e=>{y("title",e.title),y("content",e.content),y("isPublic",e.isPublic),y("createdAt",e.createdAt),P(e.content.length)})},[]);let[w,P]=(0,r.useState)(0);async function S(e){try{let t=await i.Z.post("".concat("http://localhost:3000","/api/user/").concat(m.id,"/").concat(m.diaryId,"/updateDiary"),{title:e.title,content:e.content,isPublic:e.isPublic});200===t.status&&x.push("/user/".concat(m.id,"/").concat(m.diaryId))}catch(e){console.log(e)}}let A=(0,n.useSearchParams)(),C=null==A?void 0:A.get("modal");return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("link",{href:"https://fonts.googleapis.com/icon?family=Material+Icons",rel:"stylesheet"}),(0,s.jsx)(u.default,{}),(0,s.jsxs)("form",{className:"p-diary-form",children:[C&&(0,s.jsx)(p.Z,{}),(0,s.jsxs)("div",{className:"p-diary-paper",children:[(0,s.jsx)("p",{className:"p-diary-date",children:"".concat(new Date(String(v("createdAt"))).toLocaleString("ko-KR").split(".")[0],"년 ").concat(new Date(String(v("createdAt"))).toLocaleString("ko-KR").split(".")[1],"월 ").concat(new Date(String(v("createdAt"))).toLocaleString("ko-KR").split(".")[2],"일")}),(0,s.jsxs)("label",{className:"p-diary-form-title-label__outer",children:[(0,s.jsx)("input",{type:"text",className:g.title?"p-diary-form-title errored":"p-diary-form-title",...j("title",{required:"제목을 입력해주세요."}),placeholder:"오늘의 제목"}),(0,s.jsx)("span",{className:"underline"}),(0,s.jsx)("span",{className:"form-control-blind",children:"일기 제목 입력하기"})]}),(0,s.jsx)("div",{className:"p-signup-form-error-message",children:null===(e=g.title)||void 0===e?void 0:e.message}),(0,s.jsxs)("label",{children:[(0,s.jsx)("textarea",{className:g.content?"p-diary-form-content errored":"p-diary-form-content",...j("content",{required:"내용을 입력해주세요."}),placeholder:"당신의 하루를 작성해주세요.",onChange:e=>{P(e.target.value.length)},maxLength:250}),(0,s.jsx)("span",{className:"form-control-blind",children:"일기 내용 입력하기"})]}),(0,s.jsxs)("div",{className:"p-diary-form-content-text-counter",children:[(0,s.jsx)("div",{className:"p-signup-form-error-message",children:null===(t=g.content)||void 0===t?void 0:t.message}),(0,s.jsxs)("p",{className:"p-diary-form-content-text-limit",children:[(0,s.jsx)("span",{children:w}),(0,s.jsx)("span",{children:"/250자"})]})]}),(0,s.jsxs)("div",{className:"p-diary-form-checkbox-label__outer",children:[(0,s.jsxs)("label",{className:"p-diary-form-checkbox-label",children:[(0,s.jsxs)("div",{className:_?"p-diary-form-checkbox-input__outer active":"p-diary-form-checkbox-input__outer",children:[(0,s.jsx)("div",{className:"p-diary-form-checkbox",children:(0,s.jsx)("span",{className:"p-diary-form-check"})}),(0,s.jsx)("input",{className:"p-diary-form-checkbox-input",type:"checkbox",checked:_,...j("isPublic")})]}),(0,s.jsx)("span",{className:"p-diary-form-checkbox-text__outer",children:(0,s.jsx)("span",{className:"p-diary-form-checkbox-text",children:"공개 여부"})})]}),(0,s.jsx)("span",{"data-tooltip":"checkbox를 checked하면 회원 모두에게 일기가 공개되며, unchecked하면 비공개됩니다.",children:(0,s.jsx)(d.G,{icon:o.FDd})})]})]}),(0,s.jsx)("div",{className:"p-diary-form-error-message",children:null===(a=g.user)||void 0===a?void 0:a.message}),(0,s.jsx)("div",{className:"p-diary-form-utility",children:(0,s.jsx)(h(),{href:g?"":"/user/".concat(m.id,"/").concat(m.diaryId,"/update/?modal=true"),className:"p-diary-form-submit-button",onClick:b(e=>{(null==f?void 0:f.user)?S(e):N("user",{message:"로그인 정보가 없습니다. 일기를 작성하려면 먼저 로그인 또는 회원가입해주세요."})}),children:"일기 수정하기"})})]})]})}},1396:function(e,t,a){e.exports=a(6685)}},function(e){e.O(0,[676,685,35,222,232,865,971,596,744],function(){return e(e.s=6898)}),_N_E=e.O()}]);