(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[81],{9185:function(s,e,a){Promise.resolve().then(a.bind(a,1955))},1955:function(s,e,a){"use strict";a.r(e),a.d(e,{default:function(){return c}});var i=a(7437),r=a(9222),o=a(4033),n=a(2265),l=a(1865),d=a(2759),t=a(504);function c(){var s,e,a,c,p,m;let{register:u,handleSubmit:h,watch:f,getValues:g,setError:w,formState:{errors:j}}=(0,l.cI)(),[v,x]=(0,n.useState)(!1),N=f("email"),b=f("password"),_=f("confirmPassword"),k=(0,o.useRouter)(),y=(0,o.useSearchParams)(),P=null==y?void 0:y.get("modal");async function C(s){let e=await fetch("".concat("http://localhost:3000","/api/signup/credentialEmailCheck"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s})}),a=await e.json();a?x(!0):(x(!1),w("email",{message:"가입된 이메일이 아닙니다. 다시 작성해주세요."}))}async function S(s){try{let e=await r.Z.post("".concat("http://localhost:3000","/api/signin/userCheck"),{email:s.email,auth:"credentials"}),a=e.data;a?(await r.Z.post("".concat("http://localhost:3000","/api/signup/updatePassword"),{id:a,password:s.password}),k.push("/sign_up/password/?modal=true")):console.log("일치하는 유저정보가 없습니다.")}catch(s){console.log(s)}}return(0,n.useEffect)(()=>{x(!1)},[]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"p-password-update-description",children:"가입한 이메일 주소를 입력해주세요."}),(0,i.jsxs)("div",{className:"p-password-update-input__outer",children:[(0,i.jsxs)("div",{className:"p-password-update-email__outer",children:[(0,i.jsx)("input",{...u("email"),className:"p-password-update-input",type:"email",name:"email",placeholder:"이메일",readOnly:v}),v?(0,i.jsx)("div",{className:"p-signup-form-confirm-message",children:v&&"가입된 이메일입니다. 비밀번호를 재설정하세요."}):(0,i.jsx)("div",{className:"p-signup-form-error-message",children:null===(e=j.email)||void 0===e?void 0:null===(s=e.message)||void 0===s?void 0:s.toString()})]}),(0,i.jsx)("button",{className:"p-password-update-input-button",disabled:""===N||!N,onClick:()=>{C(g("email"))},children:"확인"})]}),v&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"p-signup-form-password-input__outer",children:[(0,i.jsx)("label",{className:j.password?"p-signup-form-label errored":"p-signup-form-label",children:"비밀번호"}),(0,i.jsx)("div",{className:"p-signup-form-description",children:"영문, 숫자를 포함한 8자 이상의 비밀번호를 입력해주세요."}),(0,i.jsxs)("label",{children:[(0,i.jsx)("input",{...u("password",{required:"필수 입력 항목입니다.",pattern:{value:/^(?=.*?[A-Za-z])(?=.*?[0-9]).{8,}$/,message:"비밀번호는 영문, 숫자를 포함하여 8자 이상이어야 합니다."}}),className:j.password?"p-signup-form-password-input errored":"p-signup-form-password-input",type:"password",name:"password",placeholder:"비밀번호"}),(0,i.jsx)("span",{className:"form-control-blind",children:"비밀번호 입력하기"})]}),(0,i.jsx)("div",{className:"p-signup-form-error-message",children:null===(c=j.password)||void 0===c?void 0:null===(a=c.message)||void 0===a?void 0:a.toString()})]}),(0,i.jsxs)("div",{className:"p-signup-form-confirm-password-input__outer",children:[(0,i.jsx)("label",{className:j.confirmPassword?"p-signup-form-label errored":"p-signup-form-label",children:"비밀번호 확인"}),(0,i.jsxs)("label",{children:[(0,i.jsx)("input",{...u("confirmPassword",{required:"확인을 위해 비밀번호를 한 번 더 입력해주세요.",validate:{check:s=>{if(g("password")!==s)return"비밀번호가 일치하지 않습니다."}}}),className:j.confirmPassword?"p-signup-form-confirm-password-input errored":"p-signup-form-confirm-password-input",type:"password",name:"confirmPassword",placeholder:"비밀번호 확인"}),(0,i.jsx)("span",{className:"form-control-blind",children:"입력한 비밀번호 확인하기"})]}),(0,i.jsx)("div",{className:"p-signup-form-error-message",children:null===(m=j.confirmPassword)||void 0===m?void 0:null===(p=m.message)||void 0===p?void 0:p.toString()})]})]}),(0,i.jsx)("button",{className:"p-password-update-check-button",disabled:!b||!_,onClick:h(s=>{S(s)}),children:"비밀번호 재설정"}),P&&(0,i.jsx)("div",{className:"modal__outer",children:(0,i.jsxs)("div",{className:"modal",children:[(0,i.jsx)("button",{className:"modal-escape",onClick:()=>{k.push("/sign_in")},children:(0,i.jsx)(t.G,{icon:d.g82})}),(0,i.jsx)("h1",{className:"modal-title",children:"정상적으로 변경되었습니다."}),(0,i.jsx)("div",{className:"modal-button__outer",children:(0,i.jsx)("button",{className:"modal-button confirm",onClick:()=>{k.push("/sign_in")},children:"확인"})})]})})]})}},4033:function(s,e,a){s.exports=a(8165)}},function(s){s.O(0,[676,35,222,865,971,596,744],function(){return s(s.s=9185)}),_N_E=s.O()}]);